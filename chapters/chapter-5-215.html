<p>This code expresses very naturally that temperatures are being fetched asynchronously, their values collected in a JSON object, the snapshot service being called, and the result being eventually sent to the requester. Still, there are many suspension points with asynchronous operations. Also the error management is a familiar <code class="code">try / catch</code> structure.</p>