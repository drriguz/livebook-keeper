<p>Note that the update query can fail, for instance because another user has already registered a device with the same identifier. In this case we need to manually rollback and remove the document that was created by the authentication provider, because otherwise we would have an incomplete document in the database. Listing <a class="calibre8 pcalibre" href="/book/vertx-in-action/chapter-10/v-10/deleteIncompleteUser" shape="rect" title="Example 10.11. Implementation of the deleteIncompleteUser method">10.11</a> holds the implementation of the <code class="code">deleteIncompleteUser</code> method.</p>