<p>Note that in this example as we had little data we used a single buffer that we prepared wholly before writing it to the file, but we could equally use a buffer for the header, and new buffers for each key / value entry.</p>